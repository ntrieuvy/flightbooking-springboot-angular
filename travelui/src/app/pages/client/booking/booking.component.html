<div class="booking-container">
    <h2>Booking Details - {{slug | titlecase}}</h2>

    <div class="progress-steps">
        <div class="step active">Passenger Information</div>
        <div class="step">Seat Selection</div>
        <div class="step">Payment</div>
        <div class="step">Confirmation</div>
    </div>

    <form [formGroup]="bookingForm" (ngSubmit)="onSubmit()" class="booking-form">
        <!-- Adults Section -->
        <div class="form-section">
            <h3>Adult Passengers ({{searchForm.adults}})</h3>
            <div formArrayName="adults">
                <div *ngFor="let adult of adults.controls; let i = index" [formGroupName]="i" class="passenger-form">
                    <h4>Adult {{i + 1}}</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Full Name</label>
                            <input type="text" formControlName="fullName">
                            <div *ngIf="adult.get('fullName')?.touched && adult.get('fullName')?.errors"
                                class="error-message">
                                Full name is required
                            </div>
                        </div>
                        <div class="form-group">
                            <label>ID Card/Passport Number</label>
                            <input type="text" formControlName="idNumber">
                            <div *ngIf="adult.get('idNumber')?.touched && adult.get('idNumber')?.errors"
                                class="error-message">
                                ID number is required
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Date of Birth</label>
                            <input type="date" formControlName="dob">
                            <div *ngIf="adult.get('dob')?.touched && adult.get('dob')?.errors" class="error-message">
                                Date of birth is required
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Gender</label>
                            <select formControlName="gender">
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Children Section -->
        <div class="form-section" *ngIf="searchForm.children > 0">
            <h3>Child Passengers ({{searchForm.children}})</h3>
            <div formArrayName="children">
                <div *ngFor="let child of children.controls; let i = index" [formGroupName]="i" class="passenger-form">
                    <h4>Child {{i + 1}}</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Full Name</label>
                            <input type="text" formControlName="fullName">
                            <div *ngIf="child.get('fullName')?.touched && child.get('fullName')?.errors"
                                class="error-message">
                                Full name is required
                            </div>
                        </div>
                        <div class="form-group">
                            <label>ID Card/Passport Number</label>
                            <input type="text" formControlName="idNumber">
                            <div *ngIf="child.get('idNumber')?.touched && child.get('idNumber')?.errors"
                                class="error-message">
                                ID number is required
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Date of Birth</label>
                            <input type="date" formControlName="dob">
                            <div *ngIf="child.get('dob')?.touched && child.get('dob')?.errors" class="error-message">
                                Date of birth is required
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Gender</label>
                            <select formControlName="gender">
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Infants Section -->
        <div class="form-section" *ngIf="searchForm.infants > 0">
            <h3>Infant Passengers ({{searchForm.infants}})</h3>
            <div formArrayName="infants">
                <div *ngFor="let infant of infants.controls; let i = index" [formGroupName]="i" class="passenger-form">
                    <h4>Infant {{i + 1}}</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Full Name</label>
                            <input type="text" formControlName="fullName">
                            <div *ngIf="infant.get('fullName')?.touched && infant.get('fullName')?.errors"
                                class="error-message">
                                Full name is required
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Birth Certificate Number</label>
                            <input type="text" formControlName="birthCertNumber">
                            <div *ngIf="infant.get('birthCertNumber')?.touched && infant.get('birthCertNumber')?.errors"
                                class="error-message">
                                Birth certificate number is required
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Date of Birth</label>
                            <input type="date" formControlName="dob">
                            <div *ngIf="infant.get('dob')?.touched && infant.get('dob')?.errors" class="error-message">
                                Date of birth is required
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Gender</label>
                            <select formControlName="gender">
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Contact Information Section -->
        <div class="form-section contact-section" formGroupName="contactInfo">
            <h3>Contact Information</h3>
            <div class="form-row">
                <div class="form-group">
                    <label>Full Name</label>
                    <input type="text" formControlName="fullName">
                    <div *ngIf="bookingForm.get('contactInfo.fullName')?.touched && bookingForm.get('contactInfo.fullName')?.errors"
                        class="error-message">
                        Full name is required
                    </div>
                </div>
                <div class="form-group">
                    <label>Phone Number</label>
                    <input type="tel" formControlName="phone">
                    <div *ngIf="bookingForm.get('contactInfo.phone')?.touched && bookingForm.get('contactInfo.phone')?.errors"
                        class="error-message">
                        Valid phone number is required
                    </div>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" formControlName="email">
                    <div *ngIf="bookingForm.get('contactInfo.email')?.touched && bookingForm.get('contactInfo.email')?.errors"
                        class="error-message">
                        Valid email is required
                    </div>
                </div>
                <div class="form-group">
                    <label>ID Card/Passport Number</label>
                    <input type="text" formControlName="idNumber">
                    <div *ngIf="bookingForm.get('contactInfo.idNumber')?.touched && bookingForm.get('contactInfo.idNumber')?.errors"
                        class="error-message">
                        ID number is required
                    </div>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group full-width">
                    <label>Address</label>
                    <input type="text" formControlName="address">
                    <div *ngIf="bookingForm.get('contactInfo.address')?.touched && bookingForm.get('contactInfo.address')?.errors"
                        class="error-message">
                        Address is required
                    </div>
                </div>
            </div>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn-primary">Continue to Seat Selection</button>
        </div>
    </form>
</div>